FROM openjdk:17-jdk

ARG JAR_FILE=./build/libs/ody-backend-0.0.1-SNAPSHOT.jar

ENV SPRING_PROFILES_ACTIVE=dev
ENV JASYPT_ENCRYPTOR_PASSWORD=${JASYPT_ENCRYPTOR_PASSWORD}
ENV HIKARI_MAXIMUM_POOL_SIZE=${HIKARI_MAXIMUM_POOL_SIZE}
ENV HIKARI_MAX_LIFETIME=${HIKARI_MAX_LIFETIME}
ENV TOMCAT_MAX_CONNECTIONS=${TOMCAT_MAX_CONNECTIONS}
ENV TOMCAT_ACCEPT_COUNT=${TOMCAT_ACCEPT_COUNT}
ENV TOMCAT_THREADS_MAX=${TOMCAT_THREADS_MAX}

COPY ${JAR_FILE} ody-backend.jar

ENTRYPOINT ["java", "-jar", "-Duser.timezone=Asia/Seoul", "ody-backend.jar"]
